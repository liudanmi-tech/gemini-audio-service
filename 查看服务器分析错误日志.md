# 查看服务器分析错误日志

## 问题分析

从 iOS 客户端日志看：
- ✅ 上传成功（session_id: 94431309-a27f-480e-8432-5787853cfc32）
- ✅ 任务创建成功
- ❌ 任务状态一直是 `failed`

说明服务器端的分析过程失败了。

## 需要查看的日志

### 1. 查看服务器日志文件

在阿里云控制台的"命令助手"中执行：

```bash
tail -100 ~/gemini-audio-service.log
```

### 2. 查看特定任务的分析错误

```bash
grep -A 20 "94431309-a27f-480e-8432-5787853cfc32" ~/gemini-audio-service.log
```

### 3. 查看所有错误信息

```bash
grep -i "error\|exception\|failed\|分析音频失败" ~/gemini-audio-service.log | tail -50
```

### 4. 查看最近的完整日志

```bash
tail -200 ~/gemini-audio-service.log | grep -A 10 -B 5 "94431309"
```

## 可能的问题

1. **UploadFile 读取问题**：虽然我们修复了，但可能还有其他问题
2. **Gemini API 调用失败**：API Key、网络、配额等问题
3. **文件上传到 Gemini 失败**：文件格式、大小等问题
4. **JSON 解析失败**：Gemini 返回的格式不符合预期

## 诊断步骤

请执行上面的命令，把日志内容发给我，我会根据日志定位具体问题。

