# 排查分析失败问题

## 步骤 1: 找到日志文件

日志文件可能在不同的位置，先查找：

```bash
# 方法 1: 查找所有 gemini 相关的日志文件
find ~ -name "*gemini*.log" -type f 2>/dev/null

# 方法 2: 查找所有 .log 文件
find ~ -name "*.log" -type f 2>/dev/null | head -10

# 方法 3: 检查服务启动时的日志
ls -la ~/gemini-service.log 2>/dev/null
ls -la /tmp/gemini*.log 2>/dev/null
```

## 步骤 2: 查看最近的错误

找到日志文件后，查看最近的错误：

```bash
# 假设日志文件是 ~/gemini-audio-service.log
tail -200 ~/gemini-audio-service.log | grep -i "error\|exception\|失败\|分析音频失败" -A 10

# 或者查看所有最近的日志
tail -200 ~/gemini-audio-service.log
```

## 步骤 3: 检查特定任务的错误

使用 session_id 查找：

```bash
# 替换为实际的 session_id
SESSION_ID="95843c27-46cc-4499-8afa-32978ec4dafb"
grep -A 30 "$SESSION_ID" ~/gemini-audio-service.log | grep -i "error\|exception\|失败"
```

## 步骤 4: 检查服务进程

确认服务是否正常运行：

```bash
ps aux | grep "python3 main.py" | grep -v grep
```

## 步骤 5: 检查服务输出

如果服务是用 nohup 启动的，查看启动日志：

```bash
cat ~/gemini-service.log | tail -100
```

## 步骤 6: 实时查看日志（如果找到了日志文件）

```bash
tail -f /path/to/logfile.log
```

