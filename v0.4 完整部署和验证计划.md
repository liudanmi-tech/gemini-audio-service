---
name: v0.4完整部署和验证

overview: 自动完成v0.4的完整部署流程：上传缺失文件、执行数据库迁移、注册技能、验证部署状态

todos:

- id: upload-migration-files

content: 上传缺失的数据库迁移文件到服务器（run_migration_v0.4.py, add_skills_tables.sql）

status: completed

- id: execute-migration

content: 在服务器上执行数据库迁移，创建skills和skill_executions表

status: completed

dependencies:

- upload-migration-files

- id: register-skills

content: 注册4个技能到数据库（workplace_jungle, family_relationship, education_communication, brainstorm）

status: completed

dependencies:

- execute-migration

- id: verify-deployment

content: 验证部署状态：检查服务进程、端口监听、技能注册、API接口

status: completed

dependencies:

- register-skills

---

# v0.4 完整部署和验证计划

## 目标

完成v0.4技能化架构的完整部署和验证，包括文件上传、数据库迁移、技能注册和服务验证。

## 执行步骤

### 步骤1: 上传缺失的文件到服务器

- 上传 `database/migrations/run_migration_v0.4.py`

- 上传 `database/migrations/add_skills_tables.sql`

- 验证文件是否上传成功

- 设置文件执行权限

### 步骤2: 执行数据库迁移

- 通过SSH连接到服务器

- 执行 `database/migrations/run_migration_v0.4.py`

- 验证迁移是否成功（创建skills和skill_executions表）

### 步骤3: 注册技能到数据库

- 执行 `注册技能到数据库.py`

- 验证4个技能是否都注册成功（workplace_jungle, family_relationship, education_communication, brainstorm）

### 步骤4: 验证部署状态

- 检查服务进程是否运行

- 检查端口是否监听

- 验证技能列表API

- 运行验证部署脚本

## 技术细节

- 使用SSH免密登录连接到服务器

- 使用Python脚本验证数据库状态

- 使用Shell脚本执行自动化部署流程

## 预期结果

- ✅ 所有必需文件已上传到服务器

- ✅ 数据库迁移成功完成

- ✅ 4个技能全部注册成功

- ✅ 服务正常运行

- ✅ API接口可访问
