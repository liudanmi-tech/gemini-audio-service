# 修复技能加载问题总结

## 问题
客户端显示"还没有技能"，但服务端有4个技能数据。

## 发现的问题
1. **服务端错误**: `list_skills() got multiple values for argument 'category'` - 500错误
2. **metadata 引用错误**: `skills/registry.py` 中使用了 `db_skill.metadata`，应该使用 `db_skill.meta_data`

## 已修复
1. ✅ 修复了 `skills/registry.py` 中的 `metadata` 引用，改为 `meta_data`
2. ✅ 修复了 `api/skills.py` 中的 `enabled` 参数类型转换问题
3. ✅ 添加了 `Query` 导入

## 需要重启服务
请在服务器上执行：
```bash
cd ~/gemini-audio-service
pkill -f "python.*main.py"
sleep 2
source venv/bin/activate
nohup python3 main.py > ~/gemini-audio-service.log 2>&1 &
sleep 5
curl "http://localhost:8001/api/v1/skills?enabled=true" -H "Authorization: Bearer test"
```

## 修复的文件
- `skills/registry.py` - 修复 metadata 引用
- `api/skills.py` - 修复 enabled 参数类型转换
