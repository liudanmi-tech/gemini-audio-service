# ============================================
# 安装依赖 - 解决模块缺失问题
# ============================================

# ============================================
# 步骤1：检查是否有虚拟环境
# ============================================
cd /home/admin/gemini-audio-service && ls -la | grep venv

# ============================================
# 步骤2A：如果有 venv 目录，激活虚拟环境并安装依赖
# ============================================
cd /home/admin/gemini-audio-service && source venv/bin/activate && pip3 install -r requirements.txt

# ============================================
# 步骤2B：如果没有 venv，创建虚拟环境并安装依赖
# ============================================
cd /home/admin/gemini-audio-service && python3 -m venv venv && source venv/bin/activate && pip3 install -r requirements.txt

# ============================================
# 步骤3：检查 requirements.txt 是否存在
# ============================================
cd /home/admin/gemini-audio-service && cat requirements.txt

# ============================================
# 步骤4：如果 requirements.txt 不存在，手动安装必要的包
# ============================================
cd /home/admin/gemini-audio-service && pip3 install fastapi uvicorn python-dotenv google-generativeai pydantic

# ============================================
# 步骤5：验证安装
# ============================================
cd /home/admin/gemini-audio-service && python3 -c "import fastapi; import google.generativeai; print('依赖安装成功')"

